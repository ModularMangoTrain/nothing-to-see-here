<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="style.css">^<title>Puzzle 7: Register Machine</title>
</head>
<body>
  <h1>Puzzle 7: Register Machine</h1>
  <p>A virtual machine has three registers: R1, R2, and R3. All registers start at 0.</p>
  <p>Execute the following program and track the values in each register. The final answer is formed by converting the final values of R1, R2, and R3 to ASCII characters.</p>
  <pre>
Initial State: R1=0, R2=0, R3=0

MOV R1, 0x4C      ; R1 = 0x4C
MOV R2, 0x4F      ; R2 = 0x4F
MOV R3, 0x56      ; R3 = 0x56
ADD R1, 0x01      ; 
SUB R2, 0x01      ; 
XOR R3, 0x01      ; 
ADD R2, 0x02      ; 
XOR R1, 0x08      ; 
SUB R3, 0x10      ;

Final State: R1=?, R2=?, R3=?
  </pre>
  <p>What word do the final register values spell when converted to ASCII?</p>
  <p class="hint" id="hint" style="display:none;">Track each register separately through all operations.</p>
  <button onclick="showHint()">Hint</button>
  <input type="text" id="answer" placeholder="Enter your answer">
  <button onclick="checkAnswer()">Submit</button>

  <script>
    const expectedAnswer = atob('ZXBl'); // you are not slick
    const nextPage = "puzzle8.html";

    function showHint() {
      document.getElementById('hint').style.display = 'block';
    }

    function checkAnswer() {
      const userInput = document.getElementById("answer").value.toLowerCase().replace(/\s/g, '');
      if(userInput === expectedAnswer) {
        localStorage.setItem('progress', nextPage);
        window.location.href = nextPage;
      } else {
        alert("Not quite, try again");
      }
    }
  </script>
</body>
</html>
